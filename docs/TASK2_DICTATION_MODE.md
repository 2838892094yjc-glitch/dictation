# 任务2: 听写模式切换

## 任务目标
支持英译中、中译英、拼写三种听写模式

## 文件变更

### 修改文件
```
app.py                     # 添加模式切换 UI
```

## 功能清单
- [ ] 添加模式选择下拉框
- [ ] 英译中模式（当前已有）
- [ ] 中译英模式（播报中文，用户写英文）
- [ ] 拼写模式（播报英文+中文，用户拼写）
- [ ] 模式记忆（保存用户偏好）

## 听写模式说明

### 模式1: 英译中 (en_to_cn)
- 播报: 英文单词
- 用户填写: 中文释义
- 示例: "apple" → 用户写"苹果"

### 模式2: 中译英 (cn_to_en)
- 播报: 中文释义
- 用户填写: 英文单词
- 示例: "苹果" → 用户写"apple"

### 模式3: 拼写模式 (spell)
- 播报: 英文单词 + 中文释义
- 用户填写: 英文拼写
- 示例: "apple, 苹果" → 用户写"apple"

## UI 变化

### 词库页面
在"开始听写"按钮前添加：
```
听写模式: [英译中 ▼]
```

### 听写页面
- 显示当前模式
- 根据模式调整播报内容

## session_state 新增
```python
st.session_state.dictation_mode  # "en_to_cn" | "cn_to_en" | "spell"
```

## 实现步骤

### 步骤1: 添加模式选择 UI
- 在词库页面添加下拉框
- 默认值: "en_to_cn"

### 步骤2: 修改播放逻辑
- 根据模式选择播报内容
- en_to_cn: 播报英文
- cn_to_en: 播报中文
- spell: 播报英文+中文

### 步骤3: 修改答案保存逻辑
- 根据模式保存用户答案

### 步骤4: 修改批改逻辑
- 根据模式比对正确答案

## 测试要点
1. 三种模式都能正常播放
2. 答案保存正确
3. 批改结果正确

## 预计改动量
- 修改代码: ~80 行

---

## 上一任务
[任务1: 词库持久化存储](./TASK1_VOCABULARY_STORAGE.md)

## 下一任务
[任务3: 拍照批改功能](./TASK3_PHOTO_GRADING.md)
