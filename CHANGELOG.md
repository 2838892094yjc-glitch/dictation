# 变更日志

所有重要的项目变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [3.1.0] - 2026-02-17

### 新增
- ✨ **完整测试套件**
  - 新增 `tests/test_flow.py` 端到端流程测试
  - 完善 `tests/conftest.py` 共享fixtures
  - 新增 `pytest.ini` 测试配置文件
  - 优化 `run_tests.sh` 测试脚本，支持多种运行模式
- ✨ **日志系统**
  - 新增 `src/logger.py` 统一日志模块
  - 支持日志轮转和错误日志分离
  - 提供函数调用和性能日志装饰器
- ✨ **部署文档**
  - 新增 `docs/DEPLOYMENT.md` 完整部署指南
  - 包含本地部署、Docker部署、云服务部署说明
- ✨ **项目文档完善**
  - 新增 `LICENSE` MIT许可证文件
  - 更新 `README.md` 项目说明
  - 更新 `docs/API.md` API文档

### 改进
- 🎨 测试覆盖率提升
- ⚡ 代码质量优化
- 📝 文档结构优化

### 修复
- 🐛 修复测试fixtures路径问题
- 🐛 完善错误处理机制

---

## [3.0.0] - 2026-02-16

### 新增
- ✨ **三种听写模式**
  - 英译中模式：播报英文，填写中文释义
  - 中译英模式：播报中文，填写英文单词
  - 拼写模式：播报英文+中文，拼写英文单词
- ✨ **模式选择器**: 在词库页面添加听写模式下拉框
- ✨ **MiniMax TTS 集成**: 高质量中英文双语语音合成
  - 5种英文音色（male_qn_qingse, female_shaonv等）
  - 5种中文音色（male_qn_qingse, female_shaonv等）
  - 32kHz 采样率，128kbps 比特率
- ✨ **智能音频缓存**: 根据模式预加载所需音频
- ✨ **双语 OCR 支持**: 拍照批改支持中英文混合识别
- ✨ **智能答案比对**
  - 中文精确匹配
  - 英文宽松匹配（编辑距离容错）
  - 长单词容忍1个字符差异

### 改进
- 🎨 听写页面根据模式显示不同提示
- 🎨 答案页面根据模式显示题目和答案
- 🎨 拍照批改根据模式选择识别引擎
- ⚡ 音频缓存兼容多种 key 格式
- 📝 更新 README 文档
- 📝 新增详细功能使用指南
- 📝 新增快速开始指南

### 文档
- 📚 新增 `docs/TASK2_COMPLETION_REPORT.md` - 任务完成报告
- 📚 新增 `docs/FEATURE_GUIDE.md` - 功能使用指南
- 📚 新增 `TASK2_SUMMARY.md` - 实现总结
- 📚 新增 `QUICK_START.md` - 快速开始指南
- 📚 更新 `README.md` - 项目说明

### 测试
- 🧪 新增 `test_dictation_modes.py` - 三种模式测试脚本
- 🧪 新增 `demo_modes.py` - 交互式演示脚本
- 🧪 新增 `final_verification.sh` - 最终验证脚本

### 修复
- 🐛 修复音频缓存 key 格式不一致问题
- 🐛 修复拍照批改模式判断错误

---

## [2.0.0] - 2026-02-15

### 新增
- ✨ **多词库管理系统**
  - 创建、切换、删除词库
  - 词库持久化存储
  - 自动保存功能
- ✨ **拍照批改功能**
  - 手写答案识别
  - OCR 文字识别
  - 智能答案比对
  - 详细批改结果
- ✨ **AI 智能纠错**
  - 自动纠正拼写错误
  - 基于 MiniMax 大语言模型
  - 显示纠正记录

### 改进
- 🎨 优化词库页面布局
- 🎨 添加词库快捷操作
- ⚡ 提升识别准确率
- 📝 完善项目文档

### 文档
- 📚 新增 `docs/TASK1_VOCABULARY_STORAGE.md` - 词库存储文档
- 📚 新增 `data/vocabulary_store.py` - 词库管理模块

---

## [1.0.0] - 2026-02-14

### 新增
- 🎉 初始版本发布
- ✨ **拍照上传单词表**
  - 支持 JPG、PNG、JPEG 格式
  - PaddleOCR 自动识别
  - 支持多种单词表格式
- ✨ **语音播报**
  - Edge TTS 语音合成
  - 支持美式/英式发音
  - 语速可调（0.5x - 2.0x）
- ✨ **基础听写功能**
  - 单词播放
  - 手动输入答案
  - 答案对照
- ✨ **手动输入单词**
  - 文本框批量输入
  - 格式：英文 中文
- ✨ **词库管理**
  - 添加单词
  - 删除单词
  - 清空词库

### 技术栈
- 🛠️ Streamlit - Web 框架
- 🛠️ PaddleOCR - 文字识别
- 🛠️ Edge TTS - 语音合成
- 🛠️ Pillow - 图像处理

---

## 版本说明

### 版本号规则
- **主版本号**：不兼容的 API 变更
- **次版本号**：向下兼容的功能新增
- **修订号**：向下兼容的问题修复

### 标签说明
- ✨ 新增功能
- 🎨 UI/UX 改进
- ⚡ 性能优化
- 🐛 Bug 修复
- 📝 文档更新
- 🧪 测试相关
- 🛠️ 构建/工具
- 📚 文档新增
- 🔥 移除功能
- 🚀 部署相关

---

## 即将发布

### [4.0.0] - 规划中
- [ ] 内置常用词库（CET-4/6、中考、高考）
- [ ] 多用户支持
- [ ] 云端词库同步
- [ ] 移动端适配

---

## 贡献者

- Claude Sonnet 4.5 - 主要开发者
- 用户反馈团队 - 功能建议

---

**维护者**: Claude Code Team
**最后更新**: 2026-02-16
